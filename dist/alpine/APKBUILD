# Contributor: beingmeta repository manager <repoman@beingmeta.com>
# Maintainer: beingmeta repository manager <repoman@beingmeta.com>
pkgname=kno-mongo
pkgver=$(knoconfig major).$(knoconfig minor).1
pkgrel=18
pkgdesc="MongoDB bindings for KNO"
url="https://kno.so/"
arch="all"
license="GPLV3"
depends=""
makedepends="kno"
install=""
#subpackages="$pkgname-dev $pkgname-doc"
subpackages=""
source="https://github.com/beingmeta/kno-mongo/archive/trunk.tar.gz"
builddir="kno-mongo-trunk"

build() {
	git clone git@github.com:mongodb/mongo-c-driver.git
	make CMAKE_FLAGS="-DCMAKE_INSTALL_PREFIX=/usr -DCMAKE_INSTALL_LIBDIR=lib -DBUILD_SHARED_LIBS=True -DCMAKE_BUILD_TYPE=Release -DCMAKE_CXX_FLAGS=\"$CXXFLAGS\" -DCMAKE_C_FLAGS=\"$CFLAGS\""
}

check() {
	make
}

package() {
	cd src/${builddir}
	make DESTDIR="$pkgdir" SUDO= install
}
