Name:           kno-@PKG_NAME@
Version:        @VERSION@
Release:        @VERSION@%{?dist}
Summary:        ODBC bindings for kno

Group:          System Environment/Libraries
License:        GNU GPL
URL:            http://www.beingmeta.com/
Source0:        kno-@PKG_NAME@.tar
BuildRoot:      %{_tmppath}/%{name}-%{version}-%{release}-root-%(%{__id_u} -n)

BuildRequires:  libu8-devel curl-devel libldns-devel libffi-devel jemalloc-devel csnappy-devel libzstd-devel python3-devel unixodbc-devel
Requires:       libu8 >= 3.0 curl >= 7.15.1 ldns csnappy libffi libzstd unixodbc

%description
This provides API bindings, extensions, and pool/index drivers for MongoDB

%prep
%setup -q

%build
make %{?_smp_mflags} MONGCINSTALL=mongoc

%pre

%install
rm -rf $RPM_BUILD_ROOT
make install SUDO= DESTDIR=$RPM_BUILD_ROOT MONGCINSTALL=mongoc

%clean
rm -rf $RPM_BUILD_ROOT

%post -p /sbin/ldconfig

%postun -p /sbin/ldconfig

%files
%{_libdir}/kno/@PKG_NAME@.so*
%doc

